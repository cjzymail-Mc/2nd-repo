我在src文件夹中有一个 6-agent.py 程序，可以完成西面情景的任务：
  ---
  情景1：全自动执行

  python mc-dir.py task1.md --auto-architect

  - 从 task1.md 读取详细任务描述
  - 全自动执行 6 个 agents
  - 无需人工干预

  ---
  情景2：半自动执行

  python mc-dir.py

  流程：
  1. 选择模式（默认半自动）
  2. 进入 Claude CLI（plan 模式）讨论需求
  3. 生成 PLAN.md 后输入 /exit 退出
  4. 程序自动检测 PLAN.md，显示预览
  5. 用户确认后自动执行剩余 agents
  6. 失败后可用 python mc-dir.py --resume 恢复

  ---
  关于恢复机制
  ┌─────────────────┬───────────────────────────────────────┐
  │      情况       │               处理方式                │
  ├─────────────────┼───────────────────────────────────────┤
  │ 3 次重试后失败  │ 保存状态，提示用户修复后运行 --resume │
  ├─────────────────┼───────────────────────────────────────┤
  │ Token 限制中断  │ 状态已保存，等待后运行 --resume 继续  │
  ├─────────────────┼───────────────────────────────────────┤
  │ Ctrl+C 手动中断 │ 状态已保存，可随时 --resume           │
  └─────────────────┴───────────────────────────────────────┘
  状态文件位置：.claude/state.json


  你帮我对6-agent.py 文件，进行全面测试和debug，让它能够顺利工作，并修复发现的bug