# Agent ä½¿ç”¨æŒ‡å— - ä¸åŒåœºæ™¯ä¸‹çš„æœ€ä½³å®è·µ

> å¦‚ä½•åœ¨ä¸åŒå¼€å‘åœºæ™¯ä¸‹é€‰æ‹©åˆé€‚çš„å·¥å…·å’Œå·¥ä½œæµ

---

## ğŸ“Š å·¥å…·å¯¹æ¯”

| å·¥å…· | é€‚ç”¨åœºæ™¯ | å¹¶å‘æ§åˆ¶ | åˆ†æ”¯ç®¡ç† | äº¤äº’æ€§ |
|------|---------|---------|---------|--------|
| **Orchestrator.py** | å…¨æ–°é¡¹ç›®ï¼ˆ0â†’1ï¼‰ | âœ… è‡ªåŠ¨ä¸²è¡Œ+å¹¶è¡Œ | âœ… è‡ªåŠ¨åˆ›å»º feature åˆ†æ”¯ | âŒ å®Œå…¨è‡ªåŠ¨åŒ– |
| **agent-task.py** | æ—¥å¸¸è¿­ä»£å¼€å‘ | âš ï¸ æ‰‹åŠ¨ç®¡ç† | âœ… è‡ªåŠ¨åˆ›å»º agent åˆ†æ”¯ | âœ… äº¤äº’å¼ |
| **ç›´æ¥ CLI** | å¿«é€Ÿæ¢ç´¢/éªŒè¯ | âŒ æ—  | âŒ æ‰‹åŠ¨ç®¡ç† | âœ… å®Œå…¨äº¤äº’ |

---






---

## ğŸ“š å¿«é€Ÿå‚è€ƒ    â­â­â­â­â­

| æˆ‘æƒ³... | ä½¿ç”¨å·¥å…· | å‘½ä»¤ |
|--------|---------|------|
| ä»é›¶å¼€å§‹ä¸€ä¸ªé¡¹ç›® | Orchestrator | `python orchestrator.py "ä»»åŠ¡"` |
| è®©æŸä¸ª agent åšä¸€ä»¶äº‹ | agent-task | `python agent-task.py tech_lead "ä»»åŠ¡"` |
| å¤šä¸ª agents å¹¶è¡Œå·¥ä½œ | agent-taskï¼ˆå¤šçª—å£ï¼‰ | æ¯ä¸ªçª—å£è¿è¡Œä¸€ä¸ª agent-task |
| å¿«é€Ÿæ¢ç´¢ | CLI | `claude -p "..."` |
| ç­‰å¾…æ–‡ä»¶ç”Ÿæˆ | agent-task | `--wait-for advice.md` |
| ä¸åˆ›å»ºåˆ†æ”¯ | agent-task | `--no-branch` |

---












## ğŸ¯ åœºæ™¯ 1ï¼šå…¨æ–°é¡¹ç›®å¼€å‘ï¼ˆ0â†’1ï¼‰

**éœ€æ±‚**ï¼šä»é›¶å¼€å§‹åˆ›å»ºä¸€ä¸ªæ–°åŠŸèƒ½æˆ–é¡¹ç›®

### ä½¿ç”¨ Orchestrator.py

```bash
python orchestrator.py "å¸®æˆ‘å†™ä¸€ä¸ªç½‘é¡µç‰ˆçš„èµ›è½¦æ¸¸æˆ" --auto-architect       â­
```

**æµç¨‹**ï¼š
```
è‡ªåŠ¨æ¸…ç†æ—§çŠ¶æ€
  â†“
åˆ›å»º feature åˆ†æ”¯ï¼ˆfeature/orchestrator-èµ›è½¦æ¸¸æˆ-0203-1445ï¼‰
  â†“
Phase 1: Architect â†’ ç”Ÿæˆ PLAN.md
  â†“
Phase 2: Tech Lead â†’ å®¡æŸ¥æ–¹æ¡ˆ
  â†“
Phase 3: Developer â†’ ç¼–å†™ä»£ç 
  â†“
Phase 4: Tester + Security + Optimizerï¼ˆå¹¶è¡Œï¼‰
  â†“
æç¤ºä½ åˆå¹¶åˆ†æ”¯
```

**ä¼˜ç‚¹**ï¼š
- âœ… å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œæ— éœ€äººå·¥å¹²é¢„
- âœ… 6 ä¸ª agents ååŒå·¥ä½œ
- âœ… è‡ªåŠ¨åˆ†æ”¯éš”ç¦»ï¼Œé¿å…æ±¡æŸ“ä¸»åˆ†æ”¯

**ç¼ºç‚¹**ï¼š
- âŒ æ— æ³•ä¸­é€”ä¿®æ”¹æ–¹æ¡ˆï¼ˆé™¤éä¸­æ–­ï¼‰
- âŒ ä¸é€‚åˆè¿­ä»£å¼€å‘

---












## ğŸ¯ åœºæ™¯ 2ï¼šæ—¥å¸¸è¿­ä»£å¼€å‘ï¼ˆå•ä»»åŠ¡ï¼‰

**éœ€æ±‚**ï¼šè®©æŸä¸ª agent å®Œæˆä¸€ä¸ªæ˜ç¡®çš„ä»»åŠ¡

### ä½¿ç”¨ agent-task.py

```bash
# è®© tech_lead åˆ†æä»£ç å¹¶ç”Ÿæˆå»ºè®® 
python agent-task.py tech_lead "æ£€æŸ¥ src/main.py çš„æ€§èƒ½ç“¶é¢ˆ" --output advice.md      â­
```

**æµç¨‹**ï¼š
```
åˆ›å»ºåˆ†æ”¯ï¼ˆagent/tech_lead/æ€§èƒ½ç“¶é¢ˆ-0203-143012ï¼‰
  â†“
å¯åŠ¨äº¤äº’å¼ä¼šè¯
  â†“
ä½ å¯ä»¥å’Œ agent å¤šè½®å¯¹è¯
  â†“
å®Œæˆåæç¤ºä½ æäº¤å’Œåˆå¹¶
```

**ä¼˜ç‚¹**ï¼š
- âœ… çµæ´»äº¤äº’ï¼Œå¯ä»¥éšæ—¶è°ƒæ•´éœ€æ±‚
- âœ… è‡ªåŠ¨åˆ†æ”¯éš”ç¦»
- âœ… é€‚åˆè¿­ä»£å¼€å‘

**ç¼ºç‚¹**ï¼š
- âŒ ä¸€æ¬¡åªèƒ½è°ƒç”¨ä¸€ä¸ª agent
- âŒ éœ€è¦æ‰‹åŠ¨ç®¡ç† agent ä¹‹é—´çš„åä½œ

---










## ğŸ¯ åœºæ™¯ 3ï¼šå¹¶è¡Œå¼€å‘ï¼ˆå¤šä»»åŠ¡ï¼‰

**éœ€æ±‚**ï¼šåŒæ—¶è®©å¤šä¸ª agents åšä¸åŒçš„äº‹æƒ…ï¼Œé¿å…å†²çª

### ä½¿ç”¨ agent-task.pyï¼ˆå¤šçª—å£ï¼‰

#### çª—å£ 1ï¼šç”Ÿæˆä¼˜åŒ–å»ºè®®

```bash 
python agent-task.py tech_lead "åˆ†æ src/utils.py å¹¶ç”Ÿæˆä¼˜åŒ–å»ºè®®" --output advice.md      â­
```

**åˆ†æ”¯**ï¼š`agent/tech_lead/ä¼˜åŒ–å»ºè®®-0203-143000`

---

#### çª—å£ 2ï¼šç­‰å¾…å»ºè®®åé‡æ„ä»£ç 

```bash â­
python agent-task.py developer "æ ¹æ® advice.md é‡æ„ src/utils.py" --wait-for advice.md      â­
```

**åˆ†æ”¯**ï¼š`agent/developer/é‡æ„-0203-143030`

**å·¥ä½œæµ**ï¼š
1. çª—å£2 ä¼šç­‰å¾… `advice.md` ç”Ÿæˆ
2. ç”Ÿæˆåè‡ªåŠ¨å¼€å§‹æ‰§è¡Œ
3. ä¸¤ä¸ª agent åœ¨ä¸åŒåˆ†æ”¯å·¥ä½œï¼Œ**ä¸ä¼šå†²çª**

---

#### çª—å£ 3ï¼šåŒæ—¶ä¿®æ”¹å…¶ä»–æ¨¡å—

```bash 
python agent-task.py developer "ä¼˜åŒ– src/main.py çš„æ—¥å¿—è¾“å‡º" --no-branch      â­
```

**è¯´æ˜**ï¼šå¦‚æœç¡®å®šä¸ä¼šå†²çªï¼Œå¯ä»¥ç”¨ `--no-branch` åœ¨å½“å‰åˆ†æ”¯å·¥ä½œ

---

### åˆå¹¶ç­–ç•¥

**æ–¹æ¡ˆ Aï¼šä¸²è¡Œåˆå¹¶ï¼ˆæ¨èï¼‰**

```bash
# å…ˆåˆå¹¶ tech_lead çš„å»ºè®®
git checkout main
git merge agent/tech_lead/ä¼˜åŒ–å»ºè®®-0203-143000      â­

# å†åˆå¹¶ developer çš„é‡æ„
git merge agent/developer/é‡æ„-0203-143030      â­
```

**æ–¹æ¡ˆ Bï¼šåˆ›å»º PR è¿›è¡Œä»£ç å®¡æŸ¥**

```bash
# ä¸ºæ¯ä¸ªåˆ†æ”¯åˆ›å»º PR
gh pr create --base main --head agent/tech_lead/ä¼˜åŒ–å»ºè®®-0203-143000      â­
gh pr create --base main --head agent/developer/é‡æ„-0203-143030

# åœ¨ GitHub ä¸Šå®¡æŸ¥ååˆå¹¶
```

---









## ğŸ¯ åœºæ™¯ 4ï¼šå¿«é€Ÿæ¢ç´¢å’ŒéªŒè¯

**éœ€æ±‚**ï¼šå¿«é€Ÿå°è¯•ä¸€ä¸ªæƒ³æ³•ï¼Œä¸éœ€è¦åˆ†æ”¯ç®¡ç†

### ç›´æ¥ä½¿ç”¨ CLI

```bash
claude -p "$(cat .claude/agents/02-tech.md) å¿«é€Ÿæ£€æŸ¥ src/main.py æœ‰æ²¡æœ‰æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜"      â­
```

**ä¼˜ç‚¹**ï¼š
- âœ… æœ€å¿«é€Ÿã€æœ€çµæ´»
- âœ… é€‚åˆä¸€æ¬¡æ€§æ¢ç´¢

**ç¼ºç‚¹**ï¼š
- âŒ æ— åˆ†æ”¯éš”ç¦»
- âŒ éœ€è¦æ‰‹åŠ¨æ„å»º prompt

---









## ğŸ¯ åœºæ™¯ 5ï¼šå¤æ‚åä½œï¼ˆæ–‡ä»¶å†²çªï¼‰

**éœ€æ±‚**ï¼šå¤šä¸ª agents éœ€è¦ä¿®æ”¹åŒä¸€ä¸ªæ–‡ä»¶

### ç­–ç•¥ 1ï¼šä¸²è¡Œæ‰§è¡Œï¼ˆæ¨èï¼‰

ä½¿ç”¨ `--wait-for` ç¡®ä¿é¡ºåºï¼š

```bash
# çª—å£1ï¼štech_lead å…ˆåˆ†æ
python agent-task.py tech_lead "åˆ†æ src/main.py" --output advice.md      â­

# çª—å£2ï¼šç­‰å¾…åˆ†æå®Œæˆå developer ä¿®æ”¹
python agent-task.py developer "æ ¹æ® advice.md é‡æ„ src/main.py" --wait-for advice.md      â­
```

---

### ç­–ç•¥ 2ï¼šæ‰‹åŠ¨åè°ƒ

```bash
# 1. tech_lead å®Œæˆåæäº¤
git add advice.md
git commit -m "æ·»åŠ ä¼˜åŒ–å»ºè®®"      â­

# 2. é€šçŸ¥ developer å¼€å§‹å·¥ä½œ
python agent-task.py developer "æ ¹æ® advice.md é‡æ„ä»£ç "      â­
```

---

### ç­–ç•¥ 3ï¼šä½¿ç”¨ Orchestratorï¼ˆæœ€å®‰å…¨ï¼‰

å¦‚æœä»»åŠ¡å¤æ‚ä¸”æ–‡ä»¶å†²çªå¤šï¼Œç›´æ¥ç”¨ Orchestrator è®©ç³»ç»Ÿè‡ªåŠ¨åè°ƒï¼š

```bash
python orchestrator.py "é‡æ„ src/main.py ä»¥æå‡æ€§èƒ½" --auto-architect      â­
```

Orchestrator ä¼šæŒ‰é¡ºåºæ‰§è¡Œï¼Œé¿å…å†²çªã€‚

---










## ğŸ“‹ æœ€ä½³å®è·µæ€»ç»“

### âœ… DOï¼ˆæ¨èåšæ³•ï¼‰

1. **å…¨æ–°åŠŸèƒ½** â†’ ç”¨ Orchestrator.py
2. **è¿­ä»£å¼€å‘** â†’ ç”¨ agent-task.py
3. **å¿«é€ŸéªŒè¯** â†’ ç›´æ¥ç”¨ CLI
4. **å¹¶è¡Œä»»åŠ¡** â†’ agent-task.py å¤šçª—å£ + åˆ†æ”¯éš”ç¦»
5. **æ–‡ä»¶å†²çª** â†’ ä½¿ç”¨ `--wait-for` æˆ–ä¸²è¡Œæ‰§è¡Œ
6. **åˆå¹¶å‰å®¡æŸ¥** â†’ åˆ›å»º PR è€Œä¸æ˜¯ç›´æ¥ merge

### âŒ DON'Tï¼ˆé¿å…åšæ³•ï¼‰

1. âŒ **ä¸è¦**åœ¨å¤šä¸ªçª—å£åŒæ—¶ä¿®æ”¹åŒä¸€æ–‡ä»¶ï¼ˆé™¤éåœ¨ä¸åŒåˆ†æ”¯ï¼‰
2. âŒ **ä¸è¦**åœ¨ä¸»åˆ†æ”¯ç›´æ¥è¿è¡Œ agentsï¼ˆç”¨ `--no-branch` éœ€è°¨æ…ï¼‰
3. âŒ **ä¸è¦**ç›²ç›®åˆå¹¶åˆ†æ”¯ï¼ˆå…ˆæ£€æŸ¥å†²çªï¼‰
4. âŒ **ä¸è¦**åœ¨ Orchestrator è¿è¡Œæ—¶æ‰‹åŠ¨ä¿®æ”¹æ–‡ä»¶

---

## ğŸ› ï¸ è¾…åŠ©è„šæœ¬æ¨è

### 1. æŸ¥çœ‹å½“å‰æ‰€æœ‰ agent åˆ†æ”¯

```bash
git branch | grep "agent/"
```

### 2. æ¸…ç†å·²åˆå¹¶çš„ agent åˆ†æ”¯

```bash
git branch --merged | grep "agent/" | xargs git branch -d
```

### 3. å¿«é€Ÿåˆ‡æ¢åˆ°ä¸»åˆ†æ”¯

```bash
alias gm="git checkout main"
```

### 4. æŸ¥çœ‹åˆ†æ”¯å·®å¼‚

```bash
git diff main..agent/tech_lead/ä¼˜åŒ–å»ºè®®-0203-143000
```

---

## ğŸ’¡ è¿›é˜¶ï¼šPre-commit Hook å¼ºåˆ¶åˆ†æ”¯æ£€æŸ¥

å¦‚ Gemini å»ºè®®ï¼Œå¯ä»¥æ·»åŠ  Hook é˜²æ­¢ agents ç›´æ¥åœ¨ä¸»åˆ†æ”¯æäº¤ï¼š

```bash
# .git/hooks/pre-commit

#!/bin/bash

# è·å–å½“å‰åˆ†æ”¯
BRANCH=$(git rev-parse --abbrev-ref HEAD)

# æ£€æŸ¥æ˜¯å¦åœ¨ä¸»åˆ†æ”¯
if [ "$BRANCH" = "main" ] || [ "$BRANCH" = "master" ]; then
    # æ£€æŸ¥æ˜¯å¦æ˜¯ AI Agent åœ¨æ“ä½œï¼ˆé€šè¿‡ commit message æˆ–ç¯å¢ƒå˜é‡ï¼‰
    if [ -n "$AGENT_TASK" ]; then
        echo "âŒ é”™è¯¯ï¼šAI Agent ä¸å…è®¸ç›´æ¥åœ¨ä¸»åˆ†æ”¯æäº¤"
        echo "   è¯·ä½¿ç”¨ agent-task.py æˆ– orchestrator.py è‡ªåŠ¨åˆ›å»ºåˆ†æ”¯"
        exit 1
    fi
fi

exit 0
```

---

## ğŸ“š å¿«é€Ÿå‚è€ƒ    â­â­â­â­â­

| æˆ‘æƒ³... | ä½¿ç”¨å·¥å…· | å‘½ä»¤ |
|--------|---------|------|
| ä»é›¶å¼€å§‹ä¸€ä¸ªé¡¹ç›® | Orchestrator | `python orchestrator.py "ä»»åŠ¡"` |
| è®©æŸä¸ª agent åšä¸€ä»¶äº‹ | agent-task | `python agent-task.py tech_lead "ä»»åŠ¡"` |
| å¤šä¸ª agents å¹¶è¡Œå·¥ä½œ | agent-taskï¼ˆå¤šçª—å£ï¼‰ | æ¯ä¸ªçª—å£è¿è¡Œä¸€ä¸ª agent-task |
| å¿«é€Ÿæ¢ç´¢ | CLI | `claude -p "..."` |
| ç­‰å¾…æ–‡ä»¶ç”Ÿæˆ | agent-task | `--wait-for advice.md` |
| ä¸åˆ›å»ºåˆ†æ”¯ | agent-task | `--no-branch` |

---

**æœ€åæ›´æ–°**: 2026-02-03
**ä½œè€…**: Claude Sonnet 4.5
